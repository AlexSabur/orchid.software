<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<?xml encoding="UTF-8"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="description" content="The platform is shipped with CMS functionatily and it's assumed that by default all elementst that contain website data are instances of `Post` model."><meta name="author" content="Alexandr Chernyaev"><meta property="og:site_name" content="Orchid - Laravel Admin Panel"><meta property="og:title" content="Posts | Orchid - Laravel Admin Panel"><meta property="og:description" content="The platform is shipped with CMS functionatily and it's assumed that by default all elementst that contain website data are instances of `Post` model."><meta property="og:url" content="http://orchid.software/en/docs/post"><meta property="og:image" content="/assets/img/orchid.svg"><meta property="og:type" content="website"><meta name="twitter:image:alt" content="Orchid - Laravel Admin Panel"><meta name="twitter:card" content="summary_large_image"><title>Orchid - Laravel Admin Panel | Posts</title><link rel="home" href="http://orchid.software"><link rel="icon" href="/favicon.ico"><!-- Insert analytics code here --><link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet"><link rel="stylesheet" href="/assets/build/css/app.css?id=570c2ea7587e5cbb2825"><script src="/assets/build/js/app.js?id=90106e4e96043720b0d2"></script></head><body itemscope itemtype="http://schema.org/WebPage">

    <div id="app" class="b-t b-primary">

        <!-- header -->
        <header id="header" class="bg-white b-b box-shadow-lg"><div class="container">
                <div class="d-flex flex-column flex-md-row align-items-center p-4 px-md-4">
                    <h5 class="my-0 mr-md-auto font-weight-normal">
                        <a href="http://orchid.software/en">
                            <img src="/assets/img/orchid.svg" alt="Laravel Orchid" style="height: 20px;"></a>
                    </h5>
                    <nav class="my-2 mt-4 mt-md-0 my-md-0 mr-md-3"><a class="p-3 text-dark" href="/en/docs">
                            <i class="icon-docs m-r-xs text-xs"></i>
                            Documentation                        </a>
                        <a class="p-3 text-dark" href="/en/icons">
                            <i class="icon-cup m-r-xs text-xs"></i>
                            Icons                        </a>

                        <a class="p-3 text-dark" href="https://t.me/orchid_community" target="_blank" rel="noopener noreferrer">
                            <i class="icon-bubbles m-r-xs text-xs"></i>
                            Discussion                        </a>

                        <a class="p-3 text-dark" href="https://github.com/orchidsoftware/platform/issues" target="_blank">
                            <i class="icon-support m-r-xs text-xs"></i>
                            Support                        </a>
                    </nav><a href="https://github.com/orchidsoftware/platform" target="_blank" class="btn btn-sm btn-outline-primary btn-rounded hidden-sm">
                        <strong><i class="icon-social-github m-r-xs"></i> Contribute on GitHub</strong>
                    </a>
                </div>
            </div>
        </header><!-- / header --><div id="content">
            
    <div class="bg-white-only">
        <div class="container no-padder" id="docs">
            <div class="row pt-3 pb-3 m-0">
                <div class="col col-md-3 b-r">
                    <nav class="nav-docs"><ul class=" toc-links "><h4 class="text-orchid font-thin">Prologue</h4>

<li>
    
            
        <ul class=" toc-links-1 "><li>
            
        <a href="/en/docs" class="lvl1   nav-menu__item hover:text-blue">
            Introduction project
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/installation" class="lvl1   nav-menu__item hover:text-blue">
            Installation platform
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/contributors" class="lvl1   nav-menu__item hover:text-blue">
            Contribution
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/license" class="lvl1   nav-menu__item hover:text-blue">
            Licensing
        </a>
    
    </li>
    </ul></li>
            <h4 class="text-orchid font-thin">Platform</h4>

<li>
    
            
        <ul class=" toc-links-1 "><li>
            
        <a href="/en/docs/configuration" class="lvl1   nav-menu__item hover:text-blue">
            Configuration
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/panel_menu" class="lvl1   nav-menu__item hover:text-blue">
            Panel menu
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/screens" class="lvl1   nav-menu__item hover:text-blue">
            Screens
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/layouts" class="lvl1   nav-menu__item hover:text-blue">
            Layouts
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/filters" class="lvl1   nav-menu__item hover:text-blue">
            Filters
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/field" class="lvl1   nav-menu__item hover:text-blue">
            Fields
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/widget" class="lvl1   nav-menu__item hover:text-blue">
            Widgets
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/access" class="lvl1   nav-menu__item hover:text-blue">
            Access rights
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/settings" class="lvl1   nav-menu__item hover:text-blue">
            Settings
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/alert" class="lvl1   nav-menu__item hover:text-blue">
            Notifications
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/extension" class="lvl1   nav-menu__item hover:text-blue">
            Extension
        </a>
    
    </li>
    </ul></li>
            <h4 class="text-orchid font-thin">Content control</h4>

<li>
    
            
        <ul class=" toc-links-1 "><li>
            
        <a href="/en/docs/entities" class="lvl1   nav-menu__item hover:text-blue">
            Entities
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/post" class="lvl1  active font-semibold text-blue nav-menu__item hover:text-blue">
            Posts
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/tags" class="lvl1   nav-menu__item hover:text-blue">
            Tags
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/comments" class="lvl1   nav-menu__item hover:text-blue">
            Commentaries
        </a>
    
    </li>
            <li>
            
        <a href="/en/docs/menu" class="lvl1   nav-menu__item hover:text-blue">
            Menu
        </a>
    
    </li>
    </ul></li>
    </ul></nav></div>
                <div class="col col-md-9">
                    <main class="wrapper-lg order-md-first"><h1>Posts</h1>

                        <div class="none d-md-block">
                            <a href="https://github.com/orchidsoftware/orchid.software/edit/master/source/en/docs/post.md" class="pull-right bg-white" style="margin-top: -0.5em; padding-left: 15px; ">
                                <small class="text-muted"><i class="icon-pencil m-r-xs"></i> Edit this page</small>
                            </a>
                        </div>
                        <hr class="mb-4"><ul class="pl-5"><li class="anchor-h2">
                <a href="#data-acquisition">Data acquisition</a>
            </li>
                    <li class="anchor-h2">
                <a href="#inheriting-single-table">Inheriting single table</a>
            </li>
                    <li class="anchor-h2">
                <a href="#taxonomies">Taxonomies</a>
            </li>
                    <li class="anchor-h2">
                <a href="#categories-and-taxonomy">Categories and Taxonomy</a>
            </li>
                    <li class="anchor-h2">
                <a href="#attachments">Attachments</a>
            </li>
                    <li class="anchor-h2">
                <a href="#full-text-search">Full-text search</a>
            </li>
            </ul><hr><p>The platform is shipped with CMS functionatily and it’s assumed that by default all elementst that contain website data are instances of <code>Post</code> model.
This structure suits well to most of public web sites as their structure is mostly the same.
An example of similarities:</p>
<ul><li>News, </li>
<li>Promotional events, </li>
<li>Pages, </li>
<li>Vacancies</li>
</ul><p>You may think of hundreds of variations. To evade creating almost identical models and migrations the ORCHID uses the base <code>Post</code> model. It uses JSON for columns which is more useful and easier than EAV, besides it allows internationalization.
Some of the approaches we reproduced intentionally using Laravel WordPress wchich will allow you to be more effective.</p>
<h2><a href="#data-acquisition" name="data-acquisition">Data acquisition</a></h2>
<p>You can get an information from database with the following commands:</p>
<pre><code class="language-php">use Orchid\Press\Models\Post;

$posts = Post::all();</code></pre>
<pre><code class="language-php">// All published posts
$posts = Post::published()-&gt;get();
$posts = Post::status('publish')-&gt;get();

// Particular post
$post = Post::find(42);

//Name of the post according to current locale
echo $post-&gt;getContent('name');
</code></pre>
<p>An ability to store data in JSON does not mean you should fill in every value for every language, eg: an information about a bar may be in English and Russian but it does’n’t mean that there may be different number of free seats for different languages. Therefore there’s no sense in duplicating these parameters, instead put them into <code>options</code>.</p>
<pre><code class="language-php">// Specific post
$post = Post::find(42);

//Get all optios 
echo $post-&gt;getOptions();

//Get all locale parameters from options
echo $post-&gt;getOption('locale');

// If there's no such option or it's not specified
// you may set the second parameter that will be returned.
echo $post-&gt;getOption('countPlace',10);
</code></pre>
<h2><a href="#inheriting-single-table" name="inheriting-single-table">Inheriting single table</a></h2>
<p>If you decided to create a new class for your custom message type you may return this class for all instatnes of this message type.</p>
<p>Definition of post entity is based on the defined <code>type</code>.</p>
<pre><code class="language-php">//All the objects in $videos collection will be Post instances
$videos = Post::type('video')-&gt;status('publish')-&gt;get();</code></pre>
<h2><a href="#taxonomies" name="taxonomies">Taxonomies</a></h2>
<p>You may access single post taxonomy, eg:</p>
<pre><code class="language-php">$post = Post::find(42);
$taxonomy = $post-&gt;taxonomies()-&gt;first();
echo $taxonomy-&gt;taxonomy;</code></pre>
<p>Or you may search for posts using your own taxonomy:</p>
<pre><code class="language-php">$post = Post::taxonomy('category', 'php')-&gt;first();</code></pre>
<p>More complex forms are also possible, for example, you may get all posts of <code>main</code> category including it’s children categories:</p>
<pre><code class="language-php">$posts  = Post::whereHas('taxonomies.term', function($query){
    $query-&gt;whereIn('slug',
        Category::slug('main')-&gt;with('childrenTerm')
        -&gt;first()-&gt;childrenTerm-&gt;pluck('term.slug')
    );
})-&gt;get()</code></pre>
<p>Remember that these post types may be less effective in selection and are brought here mostly as example.</p>
<h2><a href="#categories-and-taxonomy" name="categories-and-taxonomy">Categories and Taxonomy</a></h2>
<p>To get categories, taxonomies or posts of particular category you may use the following methods:</p>
<pre><code class="language-php">// all categories
$category = Taxonomy::category()-&gt;slug('uncategorized')-&gt;posts()-&gt;first();

// Only related categories and posts
$category = Taxonomy::where('taxonomy', 'category')-&gt;with('posts')-&gt;get();
$category-&gt;each(function($category) {
    echo $category-&gt;term-&gt;getContent('name');
});

// all posts from category
$category = Category::slug('uncategorized')-&gt;posts()-&gt;first();
$category-&gt;posts-&gt;each(function($post) {
    echo $post-&gt;getContent('name');
});</code></pre>
<h2><a href="#attachments" name="attachments">Attachments</a></h2>
<p>Attachments are files that are related to a post. These files may be of different formats and extensions.
Every extension may be called separately, for example if you need to get only pictures or documents in post.</p>
<pre><code class="language-php">$item = Post::find(42);
$image = $item-&gt;attachment()-&gt;first();
$image-&gt;url();</code></pre>
<h2><a href="#full-text-search" name="full-text-search">Full-text search</a></h2>
<p>The platform is shipped with the Scout package which acts as the abstraction for full-text search in your Eloquent model.
Scout does not include the search “driver” itself, you must install the required solution by yourself, it may be, for example elasticsearch, algolia, sphinx or others.</p>
<p>To use the full text search you need to add a new method to your entity class:</p>
<pre><code class="language-php">/**
 * Get the indexable data array for the model.
 *
 * @param $array
 *
 * @return mixed
 */
public function toSearchableArray($array)
{
    // Customize array...

    return $array;
}</code></pre>
<p>It will receive all different models and return the elements required for indexing.</p>
<p>Lets take standard “DemoPost.php” as example, it has a lot of parameters but we truly need only two of them:</p>
<ul><li>Article title</li>
<li>Article content</li>
</ul><p>We must return the following:</p>
<pre><code class="language-php">/**
 * Get the indexable data array for the model.
 *
 * @param $array
 *
 * @return mixed
 */
public function toSearchableArray($array)
{
    $array['content']['en']['id'] = $array['id'];

    return $array['content']['en'];
}</code></pre>
<p>We’ve returned all data in English with index.</p>
<p>To import it we have to perform the following command:</p>
<pre><code class="language-php">php artisan scout:import Orchid\\Press\\Models\\Post</code></pre>
<p>Now we may use the search in our project:</p>
<pre><code class="language-php">use Orchid\Press\Models\Post;
$articles = Post::search('как пропатчить kde2 под freebsd')-&gt;get();</code></pre>                    </main></div>
            </div>
        </div>
    </div>

        </div>

        <!-- footer -->
        <footer id="footer"><section class="b-t"><div class="container">
                    <div class="m-t-xl m-b-xl text-xs text-center">
                        <ul class="list-inline"><li class="hidden-xs">
                                <a href="https://github.com/orchidsoftware" target="_blank">
                                    <i class="icon-social-github m-r-xs"></i> Github
                                </a>
                            </li>

                            <li>
                                <a href="https://twitter.com/orchid_platform" target="_blank" rel="noopener noreferrer">
                                    <i class="icon-social-twitter m-r-xs"></i> Twitter
                                </a>
                            </li>

                            <li>
                                <a href="https://join.slack.com/t/lara-orchid/shared_invite/MjIxODM3MDcxODcyLTE1MDE4NzY0MzctMzRiZTBlMzYxZg" target="_blank" rel="noopener noreferrer">
                                    <i class="icon-bubbles m-r-xs"></i> Slack
                                </a>
                            </li>
                            <li>
                                <a href="https://t.me/orchid_community" target="_blank" rel="noopener noreferrer">
                                    <i class="icon-paper-plane m-r-xs"></i> Telegram
                                </a>
                            </li>
                            <li>
                                <a href="https://www.paypal.me/tabuna/10usd" target="_blank" rel="noopener noreferrer">
                                    <i class="icon-wallet m-r-xs"></i> Treat coffee                                </a>
                            </li>
                        </ul><ul class="list-inline"><a href="/en">English</a>
                                <span> / </span>
                                <a href="/ru">Russian</a>
                            
                        </ul></div>
                </div>
            </section></footer><!-- / footer --></div>